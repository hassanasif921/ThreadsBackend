# Square App ID Setup Guide

## The Problem

Your frontend is using a placeholder App ID: `'sandbox-sq0idb-REPLACE_WITH_YOUR_APP_ID'`

This means any nonces generated by the frontend are **invalid** because they're not associated with your actual Square application.

## How to Get Your Square App ID

### Step 1: Go to Square Developer Dashboard
1. Visit: https://developer.squareup.com/
2. Sign in with your Square account

### Step 2: Select Your Application
1. Click on your application (or create one if you don't have one)
2. You should see your app dashboard

### Step 3: Get Credentials
1. Click on the **"Credentials"** tab in the left sidebar
2. Look for the **"Sandbox"** section
3. Copy the **"Sandbox Application ID"**
   - It looks like: `sandbox-sq0idb-XXXXXXXXXXXXXXXXXX`

### Step 4: Update Your Frontend
Replace the placeholder in your frontend code:

```javascript
// BEFORE (invalid)
const SQUARE_APP_ID = 'sandbox-sq0idb-REPLACE_WITH_YOUR_APP_ID';

// AFTER (your actual App ID)
const SQUARE_APP_ID = 'sandbox-sq0idb-YOUR_ACTUAL_APP_ID_HERE';
```

## Environment Variables (Recommended)

Instead of hardcoding, use environment variables:

### 1. Add to your `.env` file:
```env
SQUARE_ACCESS_TOKEN=your_access_token_here
SQUARE_LOCATION_ID=your_location_id_here
SQUARE_APP_ID=sandbox-sq0idb-your_app_id_here
```

### 2. Update frontend to use environment variable:
```javascript
const SQUARE_APP_ID = process.env.SQUARE_APP_ID || 'sandbox-sq0idb-REPLACE_WITH_YOUR_APP_ID';
```

## Verification Steps

### 1. Check Your Current Setup
Run this to see your current configuration:
```bash
node scripts/getSquareAppId.js
```

### 2. Test Nonce Generation
After updating the App ID:
1. Open the frontend HTML file in browser
2. Enter test card: `4111 1111 1111 1111`
3. Check browser console for successful tokenization
4. The nonce should start with `sq_cnon:` or `cnon:`

### 3. Test Backend Integration
```bash
node scripts/testWithValidNonce.js
```

## Common Issues

### ❌ "Invalid card data" Error
**Cause**: Wrong or missing App ID
**Solution**: Use correct App ID from Square Dashboard

### ❌ "Application not found" Error  
**Cause**: App ID doesn't match your Square account
**Solution**: Double-check App ID from your specific application

### ❌ Environment Mismatch
**Cause**: Using production App ID with sandbox access token
**Solution**: Use sandbox App ID with sandbox access token

## Production Setup

When ready for production:

1. Get **Production Application ID** from Square Dashboard
2. Update environment variables:
   ```env
   SQUARE_APP_ID=sq0idp-YOUR_PRODUCTION_APP_ID
   SQUARE_ACCESS_TOKEN=your_production_access_token
   ```
3. Change environment in backend:
   ```javascript
   environment: Environment.Production
   ```

## Quick Test

To verify everything is working:

1. ✅ **App ID**: Should be real ID from Square Dashboard
2. ✅ **Access Token**: Should match the environment (sandbox/production)  
3. ✅ **Location ID**: Should be valid for your Square account
4. ✅ **Nonce Generation**: Frontend should generate valid nonces
5. ✅ **Backend Processing**: Should successfully create cards

## Next Steps

1. Get your real Square App ID from the dashboard
2. Update the frontend configuration
3. Test nonce generation in the browser
4. Test card creation with fresh nonces
5. Implement proper error handling for expired nonces
